<div ng-init="vm.authenticateUser()">
    <div layout="column" layout-align="none none">
        <div flex>
            <md-toolbar md-scroll-shrink>
        <div class="md-toolbar-tools">
            <span>
                <md-button ui-sref="openpub">OpenPub</md-button>
            </span>
            <span flex></span>
            <span>
                <md-button ui-sref="openpub">openpub</md-button>
            </span>
            <div ng-if="!vm.user">
                <span>
                    <md-button ui-sref="auth">Sign In</md-button>
                </span>
            </div>
            <div ng-if="vm.user">
                <span>
                    <md-button ui-sref="auth" ng-click="vm.auth.$signOut()">Sign Out</md-button>
                </span>
            </div>
        </div>
    </md-toolbar>
        </div>
    </div>
    <div layout="row" layout-padding>
        <div layout="column" flex="10">
            
        </div>
        <div layout="column" flex="80">
            <md-content>
                <md-toolbar class="md-hue-3">
                    <div class="md-toolbar-tools">
                        <span>New Publication</span>
                    </div>
                </md-toolbar>
                <div layout-margin>
                    <form name="newOpenpubForm">

                        <div layout-gt-sm="row">
                            <md-input-container class="md-icon-float md-block">
                                <!-- Use floating label instead of placeholder -->
                                <md-icon class="fa fa-user"></md-icon>
                                <input ng-model="vm.user.displayName" type="text" disabled>
                            </md-input-container>
                        </div>

                        <div layout-gt-sm="row">
                            <md-input-container class="md-block" flex-gt-sm>
                                <label>Name</label>
                                <input name="pubName" ng-model="vm.name" required>
                                <div ng-messages="newOpenpubForm.pubName.$error">
                                    <div ng-message="required">This is required.</div>
                                </div>
                            </md-input-container>
                            <md-input-container class="md-block" flex-gt-sm>
                                <label>Research Area</label>
                                <md-select name="researchArea" ng-model="vm.researchArea" required>
                                    <md-option ng-repeat="ra in vm.researchAreas" ng-value="{{ra}}">
                                        {{ra.Name}}
                                    </md-option>
                                </md-select>
                                <div ng-messages="newOpenpubForm.researchArea.$error">
                                    <div ng-message="required">This is required.</div>
                                </div>
                            </md-input-container>

                        </div>

                            <md-checkbox md-no-ink aria-label="Checkbox No Ink" ng-model="vm.isPublic" class="md-primary">
                                publicly visible
                            </md-checkbox>

                            <md-checkbox md-no-ink aria-label="Checkbox No Ink" ng-model="vm.peerReviewed" class="md-primary">
                                Peer  Reviewed
                            </md-checkbox>
                        <br/>
                        <md-chips ng-model="vm.tags" name="tags" readonly="vm.readonly"
                                        md-removable="vm.removable" placeholder="Tags">
                        </md-chips>
                        <md-chips ng-model="vm.authers" name="authers" readonly="vm.readonly"
                                        md-removable="vm.removable" placeholder="Authers">
                        </md-chips>
                        <p style="color: red;" ng-if="vm.clickedFirstTime && vm.authers.length == 0">This is required.</p>
                        <br/>
                        <md-input-container class="md-block">
                            <label>Description</label>
                            <textarea name="description" ng-model="vm.description" md-maxlength="3000" rows="6" md-select-on-focus required></textarea>
                            <div ng-messages="newOpenpubForm.description.$error">
                                <div ng-message="required">This is required.</div>
                            </div>
                        </md-input-container>
                        <br/>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Publication Link</label>
                            <input name="pubLink" ng-model="vm.url" required>
                            <div ng-messages="newOpenpubForm.pubLink.$error">
                                <div ng-message="required">This is required.</div>
                            </div>
                        </md-input-container>
                        <md-input-container class="md-block" flex-gt-sm>
                            <label>Venue</label>
                            <input name="venue" ng-model="vm.venue" required>
                            <div ng-messages="newOpenpubForm.venue.$error">
                                <div ng-message="required">This is required.</div>
                            </div>
                        </md-input-container>
                        <div layout="row" layout-align="end">
                            <md-button class="md-raised">Cancel</md-button>
                            <md-button class="md-raised md-primary" ng-click="vm.CreateElement()">Create New Publication</md-button>
                        </div>
                        </div>
                    </form>
                </div>
            </md-content>
        </div>
        <div layout="column" flex="10">
            
        </div>
    </div>
</div>